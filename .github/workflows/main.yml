name: CI

on: push

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Greeting
        run: echo "Hello, world!"

      - name: Another greeting
        run: echo "Hello, world!"
   
  log-variable:
    runs-on: ubuntu-latest
    
    steps:
    
      - uses: actions/checkout@v2
      
      - name: Set variable
        id: set-variable
        run: |
          if [ -f "index.json" ] 
            then
              full_report=""
              jq -c '.results[].suites[]' index.json | while read -r i; do
                  title=$(echo "$i" | jq '.tests[].title')
                  file=$(echo "$i" | jq '.fullFile')
                  message=$(echo "$i" | jq '.tests[].err.message')
                  report="TEST: $title FILE: $file MESSAGE: $message"
                  full_report+="$report"
                  echo "FULL REPORT: $full_report"
                  echo "::set-output name=fail_report::"${full_report}""
              done
            else
              echo "No failed"
          fi
        
      
      - name: Log variable
        id: log-variable
        run: |
          echo "WTHHTHTHTHTHHTTHTHHHTHTH!"
        
          full_report="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."
          echo "$full_report"
        
    
    
      

